!function(){"use strict";const t={inputSelector:".modal__form-input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__form-input-error",errorClass:"modal__form-input-error_active"};class e{constructor(t,e){this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._form=e,this._inputEls=[...this._form.querySelectorAll(this._inputSelector)],this._submitButton=this._form.querySelector(this._submitButtonSelector)}_showInputError(t){const e=this._form.querySelector(`.${t.id}-error`);e.textContent=t.validationMessage,e.classList.add(this._errorClass)}_hideInputError(t,e){const s=this._form.querySelector(`.${t.id}-error`);s.textContent="",s.classList.remove(this._errorClass)}_checkInputValidity(t){if(!t.validity.valid)return this._showInputError(t);this._hideInputError(t)}_hasInvalidInput(){return!this._inputEls.every((t=>t.validity.valid))}_toggleButtonState(){this._hasInvalidInput()?this.disableSubmitButton():this.enableSubmitButton()}_setEventListeners(){this._inputEls.forEach((t=>{t.addEventListener("input",(()=>{this._checkInputValidity(t),this._toggleButtonState()}))}))}enableSubmitButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}disableSubmitButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}resetValidation(){this._toggleButtonState(),this._inputEls.forEach((t=>{this._hideInputError(t)}))}enableValidation(){this._form.addEventListener("submit",(t=>{t.preventDefault()})),this._setEventListeners()}}class s{constructor(t,e,s){let{name:n,link:i}=t;this._name=n,this._link=i,this._cardSelector=e,this._handleImageClick=s;const o=document.querySelector(this._cardSelector).content.querySelector(".card");this._cardElement=o.cloneNode(!0),this._heartButton=this._cardElement.querySelector(".card__heart-button"),this._deleteButton=this._cardElement.querySelector(".card__delete-button"),this._cardImage=this._cardElement.querySelector(".card__image"),this._cardTitle=this._cardElement.querySelector(".card__title")}_handleLikeIcons(){this._heartButton.classList.toggle("card__heart-button-active")}_handleDeleteButton(){this._cardElement.remove(),this._cardElement=null}_setEventListeners(){this._heartButton.addEventListener("click",(()=>{this._handleLikeIcons()})),this._deleteButton.addEventListener("click",(()=>{this._handleDeleteButton()})),this._cardImage.addEventListener("click",(()=>{this._handleImageClick({name:this._name,link:this._link})}))}getView(){return this._cardTitle.textContent=this._name,this._cardImage.src=this._link,this._cardImage.alt=this._name,this._setEventListeners(),this._cardElement}}class n{constructor(t){this._modalElement=document.querySelector(t),this._closeButton=this._modalElement.querySelector(".modal__close"),this._handleEscClose=this._handleEscClose.bind(this)}open(){this._modalElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._modalElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(t){"Escape"===t.key&&this.close()}setEventListeners(){this._closeButton.addEventListener("click",(()=>{this.close()})),this._modalElement.addEventListener("click",(t=>{t.target===t.currentTarget&&this.close()}))}}class i extends n{constructor(t,e){super(t),this._modalForm=this._modalElement.querySelector(".modal__form"),this._handleFormSubmit=e,this._inputList=this._modalForm.querySelectorAll(".modal__form-input")}_getInputValues(){return this._inputData={},this._inputList.forEach((t=>{this._inputData[t.name]=t.value})),this._inputData}setEventListeners(){this._modalForm.addEventListener("submit",(t=>{t.preventDefault(),this._handleFormSubmit(this._getInputValues())})),super.setEventListeners()}}document.querySelector(".cards__list");const o=document.querySelector("#profile-modal"),r=document.forms["edit-profile-form"],a=(document.querySelector("#add-card-modal"),document.forms["add-card-form"]),l=document.querySelector(".profile__add-button"),c=document.querySelector(".profile__edit-button"),d=document.querySelector(".profile__title"),u=document.querySelector(".profile__description"),m=o.querySelector("#profile-title-input"),_=o.querySelector("#profile-description-input"),h=new class{constructor(t,e){let{items:s,renderer:n}=t;this._items=s,this._renderer=n,this._container=document.querySelector(e)}renderItems(){this._items.forEach((t=>{this._renderer(t)}))}addItem(t){this._container.prepend(t)}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],renderer:p},".cards__list");function p(t){const e=new s(t,"#card-template",E).getView();h.addItem(e)}function E(t){g.open(t)}h.renderItems();const v=new class{constructor(t,e){this._titleElement=t,this._descriptionElement=e}getUserInfo(){return{title:this._titleElement.textContent,description:this._descriptionElement.textContent}}setUserInfo(t,e){this._titleElement.textContent=t,this._descriptionElement.textContent=e}}(d,u);c.addEventListener("click",(()=>{const t=v.getUserInfo();m.value=t.title,_.value=t.description,S.resetValidation(),L.open()})),l.addEventListener("click",(()=>{b.open()}));const f=new e(t,a),S=new e(t,r);f.enableValidation(),S.enableValidation();const g=new class extends n{constructor(t){super(t),this._imageEl=this._modalElement.querySelector(".modal__image"),this._titleEl=this._modalElement.querySelector(".modal__image-title")}open(t){this._imageEl.src=t.link,this._imageEl.alt=t.name,this._titleEl.textContent=t.name,super.open()}}("#image-modal");g.setEventListeners();const b=new i("#add-card-modal",(function(t){p({name:t.title,link:t["Image URL"]}),b.close(),a.reset(),f.disableSubmitButton()}));b.setEventListeners();const L=new i("#profile-modal",(function(t){const e=t.title,s=t.description;v.setUserInfo(e,s),L.close()}));L.setEventListeners()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RixZQUM3QlAsRUFBU1EsWUFBWUYsRUFBT0MsR0FDNUJJLEVBQWF0RCxPQUNmLElBbURBc0QsRUFBYW5ELG1CIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4gIHtcclxuICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QveW9zZW1pdGUuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFrZS1sb3Vpc2UuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvYmFsZC1tb3VudGFpbnMuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYXRlbWFyLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC92YW5vaXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhZ28uanBnXCIsXHJcbiAgfSxcclxuXTtcclxuXHJcbmV4cG9ydCBjb25zdCB2YWxpZGF0aW9uU2V0dGluZ3MgPSB7XHJcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2Zvcm0taW5wdXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2J1dHRvblwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX2J1dHRvbl9kaXNhYmxlZFwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9fZm9ybS1pbnB1dC1lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Zvcm0taW5wdXQtZXJyb3JfYWN0aXZlXCIsXHJcbn07XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtRWxlbWVudCkge1xyXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IHNldHRpbmdzLmlucHV0U2VsZWN0b3I7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBzZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gc2V0dGluZ3MuZXJyb3JDbGFzcztcclxuXHJcbiAgICB0aGlzLl9mb3JtID0gZm9ybUVsZW1lbnQ7XHJcblxyXG4gICAgdGhpcy5faW5wdXRFbHMgPSBbLi4udGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbCkge1xyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWwuaWR9LWVycm9yYCk7XHJcbiAgICBlcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IGlucHV0RWwudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICBlcnJvck1lc3NhZ2VFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWwsIG9wdGlvbnMpIHtcclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsLmlkfS1lcnJvcmApO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbCkge1xyXG4gICAgaWYgKCFpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsKTtcclxuICAgIH1cclxuICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWwpO1xyXG4gIH1cclxuXHJcbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcclxuICAgIHJldHVybiAhdGhpcy5faW5wdXRFbHMuZXZlcnkoKGlucHV0RWwpID0+IGlucHV0RWwudmFsaWRpdHkudmFsaWQpO1xyXG4gIH1cclxuXHJcbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xyXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XHJcbiAgICAgIHRoaXMuZGlzYWJsZVN1Ym1pdEJ1dHRvbigpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB0aGlzLmVuYWJsZVN1Ym1pdEJ1dHRvbigpO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5faW5wdXRFbHMuZm9yRWFjaCgoaW5wdXRFbCkgPT4ge1xyXG4gICAgICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWwpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBlbmFibGVTdWJtaXRCdXR0b24oKSB7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgZGlzYWJsZVN1Ym1pdEJ1dHRvbigpIHtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICB9XHJcblxyXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcblxyXG4gICAgdGhpcy5faW5wdXRFbHMuZm9yRWFjaCgoaW5wdXRFbCkgPT4ge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoeyBuYW1lLCBsaW5rIH0sIGNhcmRTZWxlY3RvciwgaGFuZGxlSW1hZ2VDbGljaykge1xyXG4gICAgdGhpcy5fbmFtZSA9IG5hbWU7XHJcbiAgICB0aGlzLl9saW5rID0gbGluaztcclxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcclxuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xyXG4gICAgY29uc3QgY2FyZFRlbXBsYXRlID0gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxyXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIik7XHJcblxyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBjYXJkVGVtcGxhdGUuY2xvbmVOb2RlKHRydWUpO1xyXG4gICAgdGhpcy5faGVhcnRCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2hlYXJ0LWJ1dHRvblwiKTtcclxuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIlxyXG4gICAgKTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZSA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XHJcbiAgICB0aGlzLl9jYXJkVGl0bGUgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUxpa2VJY29ucygpIHtcclxuICAgIHRoaXMuX2hlYXJ0QnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19oZWFydC1idXR0b24tYWN0aXZlXCIpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZURlbGV0ZUJ1dHRvbigpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBudWxsO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5faGVhcnRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlTGlrZUljb25zKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9kZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQnV0dG9uKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayh7IG5hbWU6IHRoaXMuX25hbWUsIGxpbms6IHRoaXMuX2xpbmsgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGdldFZpZXcoKSB7XHJcbiAgICB0aGlzLl9jYXJkVGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlLnNyYyA9IHRoaXMuX2xpbms7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWx0ID0gdGhpcy5fbmFtZTtcclxuXHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgIHJldHVybiB0aGlzLl9jYXJkRWxlbWVudDtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX21vZGFsRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9jbG9zZUJ1dHRvbiA9IHRoaXMuX21vZGFsRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZVwiKTtcclxuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICAvLyBvcGVuIHBvcHVwXHJcbiAgICB0aGlzLl9tb2RhbEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgLy8gY2xvc2UgcG9wdXBcclxuICAgIHRoaXMuX21vZGFsRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xyXG4gICAgLy8gbGlzdGVucyBmb3IgZXNjIGJ1dHRvblxyXG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAvLyBzZXRzIGV2ZW50IGxpc3RlbmVyc1xyXG4gICAgdGhpcy5fY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fbW9kYWxFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGlmIChldnQudGFyZ2V0ID09PSBldnQuY3VycmVudFRhcmdldCkge1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX21vZGFsRm9ybSA9IHRoaXMuX21vZGFsRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9tb2RhbEZvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9fZm9ybS1pbnB1dFwiKTtcclxuICB9XHJcblxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIHRoaXMuX2lucHV0RGF0YSA9IHt9O1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIHRoaXMuX2lucHV0RGF0YVtpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gdGhpcy5faW5wdXREYXRhO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAvLyBhZGQgYSBzdWJtaXQgZXZlbnQgbGlzdGVuZXIgdG8gdGhlIGZvcm1cclxuICAgIHRoaXMuX21vZGFsRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICB9KTtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBcIi4uL3BhZ2VzL2luZGV4LmNzc1wiO1xyXG5cclxuaW1wb3J0IHsgaW5pdGlhbENhcmRzLCB2YWxpZGF0aW9uU2V0dGluZ3MgfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XHJcblxyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcblxyXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcblxyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuXHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuXHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xyXG5cclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5cclxuLy8gQ29udGFpbmVyc1xyXG5cclxuY29uc3QgY2FyZExpc3RFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2xpc3RcIik7XHJcbmNvbnN0IGVkaXRQcm9maWxlTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtbW9kYWxcIik7XHJcbmNvbnN0IGVkaXRQcm9maWxlRm9ybSA9IGRvY3VtZW50LmZvcm1zW1wiZWRpdC1wcm9maWxlLWZvcm1cIl07XHJcbmNvbnN0IGFkZENhcmRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLWNhcmQtbW9kYWxcIik7XHJcbmNvbnN0IGFkZENhcmRGb3JtID0gZG9jdW1lbnQuZm9ybXNbXCJhZGQtY2FyZC1mb3JtXCJdO1xyXG5cclxuLy8gQnV0dG9uc1xyXG5cclxuY29uc3QgYWRkQ2FyZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcclxuY29uc3QgcHJvZmlsZUVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnV0dG9uXCIpO1xyXG5cclxuLy8gTWlzY1xyXG5cclxuY29uc3QgcHJvZmlsZVRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX190aXRsZVwiKTtcclxuY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiKTtcclxuXHJcbi8vIElucHV0c1xyXG5cclxuY29uc3QgbmFtZUlucHV0ID0gZWRpdFByb2ZpbGVNb2RhbC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtdGl0bGUtaW5wdXRcIik7XHJcbmNvbnN0IGRlc2NyaXB0aW9uSW5wdXQgPSBlZGl0UHJvZmlsZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIjcHJvZmlsZS1kZXNjcmlwdGlvbi1pbnB1dFwiXHJcbik7XHJcblxyXG4vLyBDYXJkc1xyXG5cclxuY29uc3Qgc2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxyXG4gIHtcclxuICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXHJcbiAgICByZW5kZXJlcjogY3JlYXRlQ2FyZCxcclxuICB9LFxyXG4gIFwiLmNhcmRzX19saXN0XCJcclxuKTtcclxuXHJcbnNlY3Rpb24ucmVuZGVySXRlbXMoKTtcclxuXHJcbi8vIEV2ZW50IEhhbmRsZXJzXHJcblxyXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGRhdGEpIHtcclxuICBjb25zdCBjYXJkRWxlbWVudCA9IGdldENhcmRFbGVtZW50KGRhdGEpO1xyXG4gIHNlY3Rpb24uYWRkSXRlbShjYXJkRWxlbWVudCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldENhcmRFbGVtZW50KGNhcmREYXRhKSB7XHJcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKGNhcmREYXRhLCBcIiNjYXJkLXRlbXBsYXRlXCIsIGhhbmRsZUltYWdlQ2xpY2spO1xyXG4gIHJldHVybiBjYXJkLmdldFZpZXcoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlSW1hZ2VDbGljayhjYXJkRGF0YSkge1xyXG4gIGltYWdlTW9kYWwub3BlbihjYXJkRGF0YSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUFkZENhcmRGb3JtU3VibWl0KGlucHV0RGF0YSkge1xyXG4gIGNvbnN0IGNhcmREYXRhID0ge1xyXG4gICAgbmFtZTogaW5wdXREYXRhLnRpdGxlLFxyXG4gICAgbGluazogaW5wdXREYXRhW1wiSW1hZ2UgVVJMXCJdLFxyXG4gIH07XHJcblxyXG4gIGNyZWF0ZUNhcmQoY2FyZERhdGEpO1xyXG4gIG5ld0NhcmRNb2RhbC5jbG9zZSgpO1xyXG4gIGFkZENhcmRGb3JtLnJlc2V0KCk7XHJcbiAgYWRkQ2FyZEZvcm1WYWxpZGF0b3IuZGlzYWJsZVN1Ym1pdEJ1dHRvbigpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdCh1c2VyRGF0YSkge1xyXG4gIGNvbnN0IHRpdGxlID0gdXNlckRhdGEudGl0bGU7XHJcbiAgY29uc3QgZGVzY3JpcHRpb24gPSB1c2VyRGF0YS5kZXNjcmlwdGlvbjtcclxuICB1c2VySW5mby5zZXRVc2VySW5mbyh0aXRsZSwgZGVzY3JpcHRpb24pO1xyXG4gIHByb2ZpbGVNb2RhbC5jbG9zZSgpO1xyXG59XHJcblxyXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyhwcm9maWxlVGl0bGUsIHByb2ZpbGVEZXNjcmlwdGlvbik7XHJcblxyXG4vLyBFdmVudCBMaXN0ZW5lcnNcclxuXHJcbnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgY29uc3QgdXNlckRhdGEgPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xyXG4gIG5hbWVJbnB1dC52YWx1ZSA9IHVzZXJEYXRhLnRpdGxlO1xyXG4gIGRlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSB1c2VyRGF0YS5kZXNjcmlwdGlvbjtcclxuICBwcm9maWxlRm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcclxuICBwcm9maWxlTW9kYWwub3BlbigpO1xyXG59KTtcclxuXHJcbmFkZENhcmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBuZXdDYXJkTW9kYWwub3BlbigpO1xyXG59KTtcclxuXHJcbi8vIFZhbGlkYXRpb25cclxuXHJcbmNvbnN0IGFkZENhcmRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvblNldHRpbmdzLCBhZGRDYXJkRm9ybSk7XHJcbmNvbnN0IHByb2ZpbGVGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXHJcbiAgdmFsaWRhdGlvblNldHRpbmdzLFxyXG4gIGVkaXRQcm9maWxlRm9ybVxyXG4pO1xyXG5cclxuYWRkQ2FyZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5wcm9maWxlRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG4vLyBJbWFnZSBNb2RhbFxyXG5cclxuY29uc3QgaW1hZ2VNb2RhbCA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIiNpbWFnZS1tb2RhbFwiKTtcclxuXHJcbmltYWdlTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8vIEFkZCBDYXJkIE1vZGFsXHJcblxyXG5jb25zdCBuZXdDYXJkTW9kYWwgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBcIiNhZGQtY2FyZC1tb2RhbFwiLFxyXG4gIGhhbmRsZUFkZENhcmRGb3JtU3VibWl0XHJcbik7XHJcblxyXG5uZXdDYXJkTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8vIFByb2ZpbGUgTW9kYWxcclxuXHJcbmNvbnN0IHByb2ZpbGVNb2RhbCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIFwiI3Byb2ZpbGUtbW9kYWxcIixcclxuICBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdFxyXG4pO1xyXG5cclxucHJvZmlsZU1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNsYXNzU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihjbGFzc1NlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIHJlbmRlckl0ZW1zKCkge1xyXG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShFbCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoRWwpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IodGl0bGVFbGVtZW50LCBkZXNjcmlwdGlvbkVsZW1lbnQpIHtcclxuICAgIC8vXHJcbiAgICB0aGlzLl90aXRsZUVsZW1lbnQgPSB0aXRsZUVsZW1lbnQ7XHJcbiAgICB0aGlzLl9kZXNjcmlwdGlvbkVsZW1lbnQgPSBkZXNjcmlwdGlvbkVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHRpdGxlOiB0aGlzLl90aXRsZUVsZW1lbnQudGV4dENvbnRlbnQsXHJcbiAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLl9kZXNjcmlwdGlvbkVsZW1lbnQudGV4dENvbnRlbnQsXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8odGl0bGUsIGRlc2NyaXB0aW9uKSB7XHJcbiAgICB0aGlzLl90aXRsZUVsZW1lbnQudGV4dENvbnRlbnQgPSB0aXRsZTtcclxuICAgIHRoaXMuX2Rlc2NyaXB0aW9uRWxlbWVudC50ZXh0Q29udGVudCA9IGRlc2NyaXB0aW9uO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG5cclxuICAgIHRoaXMuX2ltYWdlRWwgPSB0aGlzLl9tb2RhbEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2VcIik7XHJcbiAgICB0aGlzLl90aXRsZUVsID0gdGhpcy5fbW9kYWxFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlLXRpdGxlXCIpO1xyXG4gIH1cclxuXHJcbiAgb3BlbihjYXJkRGF0YSkge1xyXG4gICAgdGhpcy5faW1hZ2VFbC5zcmMgPSBjYXJkRGF0YS5saW5rO1xyXG4gICAgdGhpcy5faW1hZ2VFbC5hbHQgPSBjYXJkRGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fdGl0bGVFbC50ZXh0Q29udGVudCA9IGNhcmREYXRhLm5hbWU7XHJcblxyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsidmFsaWRhdGlvblNldHRpbmdzIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJGb3JtVmFsaWRhdG9yIiwiY29uc3RydWN0b3IiLCJzZXR0aW5ncyIsImZvcm1FbGVtZW50IiwidGhpcyIsIl9pbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJfZm9ybSIsIl9pbnB1dEVscyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfc3VibWl0QnV0dG9uIiwicXVlcnlTZWxlY3RvciIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWwiLCJlcnJvck1lc3NhZ2VFbCIsImlkIiwidGV4dENvbnRlbnQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImNsYXNzTGlzdCIsImFkZCIsIl9oaWRlSW5wdXRFcnJvciIsIm9wdGlvbnMiLCJyZW1vdmUiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJldmVyeSIsIl90b2dnbGVCdXR0b25TdGF0ZSIsImRpc2FibGVTdWJtaXRCdXR0b24iLCJlbmFibGVTdWJtaXRCdXR0b24iLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJmb3JFYWNoIiwiYWRkRXZlbnRMaXN0ZW5lciIsImRpc2FibGVkIiwicmVzZXRWYWxpZGF0aW9uIiwiZW5hYmxlVmFsaWRhdGlvbiIsImV2dCIsInByZXZlbnREZWZhdWx0IiwiQ2FyZCIsIl9yZWYiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVJbWFnZUNsaWNrIiwibmFtZSIsImxpbmsiLCJfbmFtZSIsIl9saW5rIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiY2FyZFRlbXBsYXRlIiwiZG9jdW1lbnQiLCJjb250ZW50IiwiX2NhcmRFbGVtZW50IiwiY2xvbmVOb2RlIiwiX2hlYXJ0QnV0dG9uIiwiX2RlbGV0ZUJ1dHRvbiIsIl9jYXJkSW1hZ2UiLCJfY2FyZFRpdGxlIiwiX2hhbmRsZUxpa2VJY29ucyIsInRvZ2dsZSIsIl9oYW5kbGVEZWxldGVCdXR0b24iLCJnZXRWaWV3Iiwic3JjIiwiYWx0IiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX21vZGFsRWxlbWVudCIsIl9jbG9zZUJ1dHRvbiIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJvcGVuIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwia2V5Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJ0YXJnZXQiLCJjdXJyZW50VGFyZ2V0IiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9tb2RhbEZvcm0iLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9pbnB1dExpc3QiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJfaW5wdXREYXRhIiwiaW5wdXQiLCJ2YWx1ZSIsImVkaXRQcm9maWxlTW9kYWwiLCJlZGl0UHJvZmlsZUZvcm0iLCJmb3JtcyIsImFkZENhcmRGb3JtIiwiYWRkQ2FyZEJ1dHRvbiIsInByb2ZpbGVFZGl0QnV0dG9uIiwicHJvZmlsZVRpdGxlIiwicHJvZmlsZURlc2NyaXB0aW9uIiwibmFtZUlucHV0IiwiZGVzY3JpcHRpb25JbnB1dCIsInNlY3Rpb24iLCJjbGFzc1NlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJyZW5kZXJJdGVtcyIsIml0ZW0iLCJhZGRJdGVtIiwiRWwiLCJwcmVwZW5kIiwiY3JlYXRlQ2FyZCIsImRhdGEiLCJjYXJkRWxlbWVudCIsImNhcmREYXRhIiwiaW1hZ2VNb2RhbCIsInVzZXJJbmZvIiwidGl0bGVFbGVtZW50IiwiZGVzY3JpcHRpb25FbGVtZW50IiwiX3RpdGxlRWxlbWVudCIsIl9kZXNjcmlwdGlvbkVsZW1lbnQiLCJnZXRVc2VySW5mbyIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJzZXRVc2VySW5mbyIsInVzZXJEYXRhIiwicHJvZmlsZUZvcm1WYWxpZGF0b3IiLCJwcm9maWxlTW9kYWwiLCJuZXdDYXJkTW9kYWwiLCJhZGRDYXJkRm9ybVZhbGlkYXRvciIsIl9pbWFnZUVsIiwiX3RpdGxlRWwiLCJpbnB1dERhdGEiLCJyZXNldCJdLCJzb3VyY2VSb290IjoiIn0=